{"is_source_file": true, "format": "JavaScript", "description": "Controller for user-related functionality including user registration, login, and retrieving user header info.", "external_files": ["../models/User", "../services/dbService", "../utils/generateToken"], "external_methods": ["dbService.findAll", "dbService.create", "dbService.findById", "dbService.getDbAvailability", "generateToken"], "published": ["registerUser", "loginUser", "getUserHeaderInfo"], "classes": [], "methods": [{"name": "registerUser", "description": "Handles the registration of a new user, checks for existing users, and creates a new user in the database."}, {"name": "loginUser", "description": "Handles user login, checks credentials, and returns a JSON Web Token (JWT) for authenticated users."}, {"name": "getUserHeaderInfo", "description": "Fetches and returns header information related to a user."}], "calls": ["dbService.findAll", "dbService.create", "dbService.findById", "generateToken"], "search-terms": ["userController", "user registration", "user login", "get user header info"], "state": 2, "file_id": 13, "knowledge_revision": 91, "git_revision": "8a9b037a9a81e8c08b5606f8039c8135186d4bdd", "revision_history": [{"27": ""}, {"82": "1e2bdc5d1d2fdc11e66de65a26534d541a351c3e"}, {"83": "1e2bdc5d1d2fdc11e66de65a26534d541a351c3e"}, {"84": "1e2bdc5d1d2fdc11e66de65a26534d541a351c3e"}, {"85": "1e2bdc5d1d2fdc11e66de65a26534d541a351c3e"}, {"90": "8a9b037a9a81e8c08b5606f8039c8135186d4bdd"}, {"91": "8a9b037a9a81e8c08b5606f8039c8135186d4bdd"}], "ctags": [{"_type": "tag", "name": "User", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^const User = require('..\\/models\\/User');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "avatar", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^      avatar: 'https:\\/\\/example.com\\/avatar.jpg',$/", "language": "JavaScript", "kind": "property", "scope": "userInfo", "scopeKind": "class"}, {"_type": "tag", "name": "dbService", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^const dbService = require('..\\/services\\/dbService');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^      email: user.email,$/", "language": "JavaScript", "kind": "property", "scope": "userInfo", "scopeKind": "class"}, {"_type": "tag", "name": "existingUser", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^    const existingUser = users.find(user => user.email === email);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "generateToken", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^const generateToken = require('..\\/utils\\/generateToken');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getUserHeaderInfo", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^const getUserHeaderInfo = async (req, res, next) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^      id: user.id || user._id,$/", "language": "JavaScript", "kind": "property", "scope": "userInfo", "scopeKind": "class"}, {"_type": "tag", "name": "lastLogin", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^      lastLogin: new Date().toISOString()$/", "language": "JavaScript", "kind": "property", "scope": "userInfo", "scopeKind": "class"}, {"_type": "tag", "name": "loginUser", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^const loginUser = async (req, res, next) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^      name: user.name,$/", "language": "JavaScript", "kind": "property", "scope": "userInfo", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^    const userData = { name, email, password, role: 'user' };$/", "language": "JavaScript", "kind": "field", "scope": "userData", "scopeKind": "class"}, {"_type": "tag", "name": "notifications", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^      notifications: 3,$/", "language": "JavaScript", "kind": "property", "scope": "userInfo", "scopeKind": "class"}, {"_type": "tag", "name": "registerUser", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^  registerUser,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "registerUser", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^const registerUser = async (req, res, next) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "subscription", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^      subscription: 'premium',$/", "language": "JavaScript", "kind": "property", "scope": "userInfo", "scopeKind": "class"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^    let token;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^    const user = await dbService.create(User, userData);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^    const user = await dbService.findById(User, userId);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^    const user = users.find(user => user.email === email);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "userData", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^    const userData = { name, email, password, role: 'user' };$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^      const userId = user.id || user._id;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^    const userId = '1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "userInfo", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^    const userInfo = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "users", "path": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "pattern": "/^    const users = await dbService.findAll(User, { email });$/", "language": "JavaScript", "kind": "constant"}], "filename": "/home/kavia/workspace/Claro-OTT-Apis/src/controllers/userController.js", "hash": "eb9feae60edd705272bf57ba218ac4bb", "format-version": 4, "code-base-name": "default", "fields": [{"name": "avatar: 'https:\\/\\/example.com\\/avatar.jpg',", "scope": "userInfo", "scopeKind": "class", "description": "unavailable"}, {"name": "email: user.email,", "scope": "userInfo", "scopeKind": "class", "description": "unavailable"}, {"name": "id: user.id || user._id,", "scope": "userInfo", "scopeKind": "class", "description": "unavailable"}, {"name": "lastLogin: new Date().toISOString()", "scope": "userInfo", "scopeKind": "class", "description": "unavailable"}, {"name": "name: user.name,", "scope": "userInfo", "scopeKind": "class", "description": "unavailable"}, {"name": "const userData = { name, email, password, role: 'user' };", "scope": "userData", "scopeKind": "class", "description": "unavailable"}, {"name": "notifications: 3,", "scope": "userInfo", "scopeKind": "class", "description": "unavailable"}, {"name": "registerUser,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}, {"name": "subscription: 'premium',", "scope": "userInfo", "scopeKind": "class", "description": "unavailable"}, {"name": "let token;", "scope": "", "scopeKind": "", "description": "unavailable"}]}